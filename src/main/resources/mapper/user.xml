<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">

    <insert id="signUp" parameterType="user">
        INSERT INTO USERS (USERID, EMAIL, PWD, NICKNAME)
        VALUES
        (USERS_SEQ.NEXTVAL, #{email}, #{password}, #{nickname})
    </insert>

    <select id="getUserById" resultType="user">
        SELECT * FROM USERS
        WHERE USERID = #{userId}
    </select>
    
    <update id="updateLastLogin" parameterType="Long">
        UPDATE USERS
        SET LASTLOGINAT = SYSDATE
        WHERE USERID = #{userId}
    </update>

    <select id="findByEmail" parameterType="String" resultType="user">
        SELECT * FROM USERS WHERE EMAIL = #{email}
    </select>

    <select id="findByNickname" parameterType="String" resultType="user">
        SELECT * FROM USERS WHERE NICKNAME = #{nickname}
    </select>

</mapper>