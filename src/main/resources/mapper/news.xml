<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.funding.mapper.NewsMapper">

    <select id="getNewsList" resultType="news">
        SELECT *
        FROM NEWS
        WHERE PROJECTID = #{projectId}
        ORDER BY CREATEDAT DESC
    </select>

    <insert id="createNews">
        <selectKey keyProperty="newsId" resultType="Long" order="BEFORE">
            SELECT NEWS_SEQ.NEXTVAL FROM DUAL
        </selectKey>

        INSERT INTO NEWS (
            NEWSID, PROJECTID, CONTENT
        )
        VALUES (
            #{newsId}, #{projectId}, #{content}
        )
    </insert>

</mapper>
